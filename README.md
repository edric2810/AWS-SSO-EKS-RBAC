
# ğŸ” Luá»“ng XÃ¡c Thá»±c & PhÃ¢n Quyá»n RBAC trong Amazon EKS vá»›i AWS SSO

DÆ°á»›i Ä‘Ã¢y lÃ  luá»“ng chuáº©n mÃ´ táº£ quÃ¡ trÃ¬nh **xÃ¡c thá»±c vÃ  phÃ¢n quyá»n ngÆ°á»i dÃ¹ng AWS SSO** khi truy cáº­p vÃ o **Kubernetes EKS Cluster** sá»­ dá»¥ng RBAC:

---

## ğŸ“‹ SÆ¡ Ä‘á»“ luá»“ng hoáº¡t Ä‘á»™ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     1. ÄÄƒng nháº­p AWS SSO   â”‚
â”‚   (aws sso login)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Nháº­n temporary IAM Role â”‚
â”‚    (assumed-role tá»« SSO)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Gá»­i yÃªu cáº§u Ä‘áº¿n EKS (kubectl/eksctl)â”‚
â”‚    dÃ¹ng IAM Role lÃ m identity          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. API Server tra `aws-auth` ConfigMap â”‚
â”‚   Ä‘á»ƒ map IAM Role â†’ username + groups  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Kiá»ƒm tra RBAC (RoleBinding/CRB): â”‚
â”‚    - CÃ³ group `system:masters`?     â”‚
â”‚    â†’ âœ… Full quyá»n (`cluster-admin`)â”‚
â”‚    - KhÃ´ng cÃ³?                      â”‚
â”‚    â†’ âŒ Chá»‰ cÃ³ quyá»n náº¿u Ä‘Æ°á»£c RBAC  â”‚
â”‚         gÃ¡n riÃªng                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Cho phÃ©p hoáº·c tá»« chá»‘i     â”‚
â”‚    truy cáº­p theo RBAC        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… Vai trÃ² cÃ¡c thÃ nh pháº§n chÃ­nh

| ThÃ nh pháº§n        | Vai trÃ² |
|-------------------|--------|
| **AWS SSO**           | XÃ¡c thá»±c ngÆ°á»i dÃ¹ng (Authentication) |
| **IAM Role**          | Danh tÃ­nh IAM sau khi Ä‘Äƒng nháº­p |
| **aws-auth ConfigMap**| Map IAM Role â†’ Kubernetes username/group |
| **system:masters**    | NhÃ³m Ä‘áº·c biá»‡t, cÃ³ full quyá»n |
| **RBAC**              | Kiá»ƒm soÃ¡t ai Ä‘Æ°á»£c lÃ m gÃ¬ trong cá»¥m |
| **API Server**        | Thá»±c thi xÃ¡c thá»±c vÃ  phÃ¢n quyá»n |

---

## ğŸ“Œ Ghi chÃº quan trá»ng

- `aws-auth` lÃ  trung gian báº¯t buá»™c giá»¯a IAM Role vÃ  RBAC.
- Náº¿u IAM Role Ä‘Æ°á»£c gÃ¡n group `system:masters` â†’ cÃ³ toÃ n quyá»n, ká»ƒ cáº£ khi khÃ´ng cÃ³ `ClusterRoleBinding`.
- Náº¿u khÃ´ng, báº¡n cáº§n tá»± gÃ¡n `RoleBinding` hoáº·c `ClusterRoleBinding` tÆ°Æ¡ng á»©ng.

---
